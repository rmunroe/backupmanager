# Portainer Stack - Minecraft Backup Manager
#
# This compose file is designed for Portainer deployment.
# It pulls the pre-built image from GitHub Container Registry.
#
# IMPORTANT: After creating this stack in Portainer, set these environment variables:
#   - APP_PASSWORD: Your login password
#   - SECRET_KEY: A random string for session signing (use: openssl rand -hex 32)

services:
  backupmanager:
    # UPDATE: Replace YOUR_GITHUB_USERNAME with your actual GitHub username
    image: ghcr.io/YOUR_GITHUB_USERNAME/backupmanager:latest
    container_name: backupmanager
    restart: unless-stopped
    ports:
      - "8080:8000"
    environment:
      - APP_PASSWORD=${APP_PASSWORD:-changeme}
      - SECRET_KEY=${SECRET_KEY:-change-this-in-production}
      - SERVERS_BASE_PATH=/opt/docker
    volumes:
      # Docker socket for container control
      - /var/run/docker.sock:/var/run/docker.sock
      # Access to server directories for restore operations
      - /opt/docker:/opt/docker
